@{
    ViewData["Title"] = "Online Recipe";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    var recipe = (OnlineRecipe)ViewBag.Recipe;
}

<form asp-action="AddRecipe">

    <div class="row form-group">
        <div class="col">
            <input name="Name" type="text" value="@recipe.title" />
        </div>
        <div class="col">
            <img src="@recipe.imagePath" alt="Image" style="height: 200px;">
        </div>
    </div>

    <div class="row form-group">
        <div class="col-2">
            Serves:
        </div>
        <div class="col-10">
            <input name="Servings" type="text" value="@recipe.servings" />
        </div>
    </div>

    <div class="row form-group">
        <div class="col-2">
            Cuisine:
        </div>
        <div class="col-10">
            <input name="Cuisine" type="text" value="@recipe.cuisines.FirstOrDefault()" />
        </div>
    </div>

    <hr />

    <div class="table form-group">
        <div class="row">
            <div class="col-8">
                Name
            </div>
            <div class="col-4">
                Quantity
            </div>
        </div>
        @{
            var ingredients = (List<OnlineIngredient>)recipe.extendedIngredients;
        }
        @if (ingredients.Count > 0)
        {
            @foreach (var ingredient in ingredients)
            {
                <div class="row">
                    <div class="col-4">
                        @*<input name="Names" type="text" value="@ingredient.name" />*@
                        <input id="ProductType_Name" name="Names" class="form-control ui-autocomplete-input" type="text" value="@ingredient.name" autocomplete="on" />
                    </div>
                    <div class="col-4">
                        @*<input name="Aisles" type="text" value="@ingredient.aisle" />*@
                        <input id="Category_Name" name="Aisles" class="form-control ui-autocomplete-input" type="text" value="@ingredient.aisle" autocomplete="on"  />
                    </div>
                    <div class="col-4">
                        <input name="Amounts" type="number" style="width: 50%" value="@ingredient.amount" />
                        <input name="Units" type="text" style="width: 50%" value="@ingredient.unit" />
                    </div>
                </div>
            }


        }
    </div>

    <hr />

    <div class="form-group">
        <input type="submit" value="Download Recipe" class="btn btn-primary" />
    </div>

</form>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/lib/jquery-ui/jquery-ui.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#ProductType_Name').autocomplete({
                source: '/Products/GetProductTypes'
            });
            $('#Category_Name').autocomplete({
                source: '/Products/GetCategories'
            });
        });
    </script>
}
